<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>EventPro - Complete Ticketing Platform</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <script src="https://unpkg.com/zod"></script>
  <style>
    /* Custom theme colors */
    :root {
      --primary: #003366;
      --primary-light: #004080;
      --secondary: #FF6600;
      --secondary-light: #FF8533;
      --radius: 0.5rem;
    }
    .bg-primary { background-color: var(--primary); }
    .hover\:bg-primary-light:hover { background-color: var(--primary-light); }
    .bg-secondary { background-color: var(--secondary); }
    .hover\:bg-secondary-light:hover { background-color: var(--secondary-light); }
    .text-primary { color: var(--primary); }
    .text-secondary { color: var(--secondary); }
    .rounded-lg { border-radius: var(--radius); }
  </style>
</head>
<body>
  <div id="root"></div>

  <script type="text/babel">
    const { useState, useEffect, useReducer } = React;

    // ========================
    // 1. DATA LAYER
    // ========================
    class Database {
      constructor() {
        this.events = [
          {
            id: 1,
            title: "Afrobeat Festival",
            description: "Annual celebration of African music",
            imageUrl: "https://images.unsplash.com/photo-1540039155733-5bb30b53aa14",
            location: "Lagos",
            venue: "Eko Convention Center",
            date: "Dec 15, 2023",
            time: "8:00 PM",
            price: 2500000, // ₦25,000
            category: "Music",
            isFeatured: true,
            tag: "HOT"
          },
          {
            id: 2,
            title: "Football Championship",
            description: "National league finals",
            imageUrl: "https://images.unsplash.com/photo-1546519638-68e109498ffc",
            location: "Abuja",
            venue: "National Stadium",
            date: "Nov 20, 2023",
            time: "4:00 PM",
            price: 500000, // ₦5,000
            category: "Sports",
            isFeatured: true,
            tag: "NEW"
          }
        ];
        
        this.categories = [
          { id: 1, name: "Music", slug: "music" },
          { id: 2, name: "Sports", slug: "sports" },
          { id: 3, name: "Comedy", slug: "comedy" }
        ];
        
        this.users = [];
        this.subscribers = [];
      }

      // Event methods
      getEvents({ featured, location, category } = {}) {
        return Promise.resolve(
          this.events.filter(event => {
            let match = true;
            if (featured) match = match && event.isFeatured;
            if (location) match = match && 
              (event.location.toLowerCase().includes(location.toLowerCase()) ||
               event.venue.toLowerCase().includes(location.toLowerCase()));
            if (category) match = match && 
              event.category.toLowerCase() === category.toLowerCase();
            return match;
          })
        );
      }

      // User methods
      createUser(user) {
        const newUser = { ...user, id: this.users.length + 1 };
        this.users.push(newUser);
        return Promise.resolve(newUser);
      }

      // Newsletter
      subscribe(email) {
        if (!this.subscribers.includes(email)) {
          this.subscribers.push(email);
          return Promise.resolve(true);
        }
        return Promise.reject("Email already subscribed");
      }
    }

    // ========================
    // 2. UTILITIES
    // ========================
    const formatNaira = (kobo) => {
      if (kobo === 0) return 'Free';
      return new Intl.NumberFormat('en-NG', {
        style: 'currency',
        currency: 'NGN',
        minimumFractionDigits: 0
      }).format(kobo / 100);
    };

    const tagVariants = {
      'HOT': 'bg-red-500',
      'NEW': 'bg-green-500',
      'FEATURED': 'bg-blue-500',
      default: 'bg-gray-500'
    };

    // ========================
    // 3. COMPONENTS
    // ========================
    function EventCard({ event, onBook }) {
      return (
        <div className="bg-white rounded-lg shadow-md overflow-hidden transition hover:shadow-lg">
          <div className="relative h-48 overflow-hidden">
            <img 
              src={event.imageUrl} 
              alt={event.title}
              className="w-full h-full object-cover"
              loading="lazy"
            />
            {event.tag && (
              <span className={`absolute top-2 left-2 px-3 py-1 rounded-full text-xs font-bold text-white ${tagVariants[event.tag] || tagVariants.default}`}>
                {event.tag}
              </span>
            )}
          </div>
          <div className="p-4">
            <h3 className="text-lg font-bold text-primary mb-2">{event.title}</h3>
            <div className="flex items-center text-sm text-gray-600 mb-1">
              <svg className="w-4 h-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"/>
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"/>
              </svg>
              <span>{event.venue}, {event.location}</span>
            </div>
            <div className="flex items-center text-sm text-gray-600 mb-3">
              <svg className="w-4 h-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"/>
              </svg>
              <span>{event.date} • {event.time}</span>
            </div>
            <div className="flex justify-between items-center">
              <span className="text-xl font-bold text-secondary">
                {formatNaira(event.price)}
              </span>
              <button 
                onClick={() => onBook(event)}
                className="bg-primary hover:bg-primary-light text-white px-4 py-2 rounded-lg transition"
              >
                Book Now
              </button>
            </div>
          </div>
        </div>
      );
    }

    function NewsletterForm() {
      const [email, setEmail] = useState('');
      const [status, setStatus] = useState({ success: false, message: '' });

      const handleSubmit = (e) => {
        e.preventDefault();
        if (!email.includes('@')) {
          setStatus({ success: false, message: 'Please enter a valid email' });
          return;
        }
        
        // Simulate API call
        new Database().subscribe(email)
          .then(() => {
            setStatus({ success: true, message: 'Thanks for subscribing!' });
            setEmail('');
          })
          .catch(err => {
            setStatus({ success: false, message: err });
          });
      };

      return (
        <form onSubmit={handleSubmit} className="max-w-md mx-auto">
          <div className="flex gap-2">
            <input
              type="email"
              value={email}
              onChange={(e) => setEmail(e.target.value)}
              placeholder="Your email address"
              className="flex-1 px-4 py-2 rounded-lg border focus:ring-2 focus:ring-secondary"
              required
            />
            <button 
              type="submit"
              className="bg-secondary hover:bg-secondary-light text-white px-4 py-2 rounded-lg transition"
            >
              Subscribe
            </button>
          </div>
          {status.message && (
            <p className={`mt-2 text-sm ${status.success ? 'text-green-600' : 'text-red-600'}`}>
              {status.message}
            </p>
          )}
        </form>
      );
    }

    // ========================
    // 4. MAIN APP COMPONENTS
    // ========================
    function FeaturedEvents() {
      const [events, setEvents] = useState([]);
      const [loading, setLoading] = useState(true);
      const [error, setError] = useState(null);

      useEffect(() => {
        new Database().getEvents({ featured: true })
          .then(data => {
            setEvents(data);
            setLoading(false);
          })
          .catch(err => {
            setError(err.message);
            setLoading(false);
          });
      }, []);

      const handleBook = (event) => {
        alert(`Booking ${event.title} for ${formatNaira(event.price)}`);
      };

      if (loading) return <div className="text-center py-8">Loading events...</div>;
      if (error) return <div className="text-center py-8 text-red-600">Error: {error}</div>;

      return (
        <section className="py-12 bg-gray-50">
          <div className="container mx-auto px-4">
            <h2 className="text-3xl font-bold text-primary text-center mb-2">Featured Events</h2>
            <p className="text-gray-600 text-center mb-8">Discover the hottest events in your area</p>
            
            <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
              {events.map(event => (
                <EventCard 
                  key={event.id} 
                  event={event} 
                  onBook={handleBook}
                />
              ))}
            </div>
          </div>
        </section>
      );
    }

    function App() {
      return (
        <div className="min-h-screen flex flex-col">
          {/* Header */}
          <header className="bg-white shadow-sm sticky top-0 z-10">
            <div className="container mx-auto px-4 py-4 flex justify-between items-center">
              <h1 className="text-2xl font-bold text-primary">EventPro</h1>
              <nav className="hidden md:flex gap-6">
                <a href="#" className="text-primary hover:text-secondary">Events</a>
                <a href="#" className="text-primary hover:text-secondary">Categories</a>
                <a href="#" className="text-primary hover:text-secondary">Organize</a>
              </nav>
              <button className="md:hidden">☰</button>
            </div>
          </header>
          
          {/* Main Content */}
          <main className="flex-grow">
            {/* Hero Section */}
            <section className="bg-gradient-to-r from-primary to-primary-light text-white py-20">
              <div className="container mx-auto px-4 text-center">
                <h1 className="text-4xl md:text-5xl font-bold mb-4">Discover Amazing Events</h1>
                <p className="text-xl mb-8 max-w-2xl mx-auto">
                  Find and book tickets to the best events across Nigeria
                </p>
                <NewsletterForm />
              </div>
            </section>
            
            <FeaturedEvents />
            
            {/* Organizer CTA */}
            <section className="bg-secondary text-white py-16">
              <div className="container mx-auto px-4 text-center">
                <h2 className="text-3xl font-bold mb-4">Want to host your own event?</h2>
                <p className="text-xl mb-8 max-w-2xl mx-auto">
                  Join thousands of organizers using our platform to sell tickets
                </p>
                <button className="bg-white text-secondary px-6 py-3 rounded-lg font-bold hover:bg-gray-100 transition">
                  Become an Organizer
                </button>
              </div>
            </section>
          </main>
          
          {/* Footer */}
          <footer className="bg-gray-800 text-white py-12">
            <div className="container mx-auto px-4">
              <div className="grid grid-cols-1 md:grid-cols-4 gap-8">
                <div>
                  <h3 className="text-xl font-bold mb-4">EventPro</h3>
                  <p>Nigeria's premier ticketing platform for all types of events.</p>
                </div>
                <div>
                  <h4 className="font-bold mb-4">Quick Links</h4>
                  <ul className="space-y-2">
                    <li><a href="#" className="hover:text-secondary">About Us</a></li>
                    <li><a href="#" className="hover:text-secondary">Contact</a></li>
                  </ul>
                </div>
                <div>
                  <h4 className="font-bold mb-4">Legal</h4>
                  <ul className="space-y-2">
                    <li><a href="#" className="hover:text-secondary">Terms</a></li>
                    <li><a href="#" className="hover:text-secondary">Privacy</a></li>
                  </ul>
                </div>
                <div>
                  <h4 className="font-bold mb-4">Connect</h4>
                  <div className="flex gap-4">
                    <a href="#" className="hover:text-secondary">Facebook</a>
                    <a href="#" className="hover:text-secondary">Twitter</a>
                  </div>
                </div>
              </div>
              <div className="border-t border-gray-700 mt-8 pt-8 text-center">
                <p>© 2023 EventPro Nigeria. All rights reserved.</p>
              </div>
            </div>
          </footer>
        </div>
      );
    }

    // ========================
    // 5. RENDER THE APP
    // ========================
    const root = ReactDOM.createRoot(document.getElementById('root'));
    root.render(<App />);
  </script>
</body>
</html>
